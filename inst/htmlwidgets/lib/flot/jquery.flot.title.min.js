/*! Flot plugin for drawing chart title onto overlay canvas

Copyright (c) 2015 D.C. Energy L.L.C.
Licensed under GPL >=v3.

The plugin supports these options:

  title: {
    text: ""
    font: object 
  }

The font object is a specification defined similar to the axis font specification.

For example, a valid specification is:

{
    size: 11,
    lineHeight: 13,
    style: "italic",
    weight: "bold",
    family: "sans-serif",
    variant: "small-caps",
    color: "#545454"
}

(https://github.com/flot/flot/blob/master/API.md#customizing-the-axes)

In [R], this translates to:
.... %>%
  flotOptions(...,title=list(text='Number of cancer cases by age group', font=list(size=20)))
*/
(function(b){var a={title:{text:"",font:null,position:"top",inside:false}};function c(d){d.hooks.processOffset.push(function(j,l){var e=j.getOptions(),i=e.title.text,k=j.getPlaceholder(),h=k.css("font-size"),g=h?+h.replace("px",""):13,f={style:k.css("font-style"),size:Math.round(0.8*g),variant:k.css("font-variant"),weight:k.css("font-weight"),family:k.css("font-family")};if(typeof(i)==="string"&&i!==""){if(typeof(e.title.font)==="object"){e.title.font=b.extend(true,{},f,e.title.font);if(!e.title.font.lineHeight){e.title.font.lineHeight=Math.round(e.title.font.size*1.15)}}if(typeof(e.title.position)=="string"&&e.title.position=="top"&&e.title.inside===false){l.top=l.top+e.title.font.lineHeight}else{if(e.title.inside===false){l.bottom=l.bottom+e.title.font.lineHeight}}}});d.hooks.drawOverlay.push(function(j,g){var e=g.canvas.width/2,f=j.getOptions(),i=f.title.text,k=j.getPlaceholder(),h={top:-5,bottom:-5};if(typeof(i)==="string"&&i!==""){g.font=f.title.font.style+" "+f.title.font.variant+" "+f.title.font.weight+" "+f.title.font.size+"px/"+f.title.font.lineHeight+"px "+f.title.font.family;g.textAlign="center";if(f.title.inside){h={top:f.title.font.lineHeight,bottom:-j.getPlotOffset().bottom-5}}if(typeof(f.title.position)=="string"&&f.title.position=="top"){titleYcoord=j.getPlotOffset().top+h.top}else{titleYcoord=g.canvas.height+h.bottom}g.fillText(i,e,titleYcoord)}})}b.plot.plugins.push({init:c,options:a,name:"title",version:"1.0"})})(jQuery);
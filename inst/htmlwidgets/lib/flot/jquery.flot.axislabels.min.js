(function(d){var k={axisLabels:{show:true}};function e(){return !!document.createElement("canvas").getContext}function f(){if(!e()){return false}var m=document.createElement("canvas");var l=m.getContext("2d");return typeof l.fillText=="function"}function i(){var l=document.createElement("div");return typeof l.style.MozTransition!="undefined"||typeof l.style.OTransition!="undefined"||typeof l.style.webkitTransition!="undefined"||typeof l.style.transition!="undefined"}function c(p,l,o,n,m){this.axisName=p;this.position=l;this.padding=o;this.plot=n;this.opts=m;this.width=0;this.height=0}c.prototype.cleanup=function(){};b.prototype=new c();b.prototype.constructor=b;function b(p,l,o,n,m){c.prototype.constructor.call(this,p,l,o,n,m)}b.prototype.calculateSize=function(){if(!this.opts.axisLabelFontSizePixels){this.opts.axisLabelFontSizePixels=14}if(!this.opts.axisLabelFontFamily){this.opts.axisLabelFontFamily="sans-serif"}var m=this.opts.axisLabelFontSizePixels+this.padding;var l=this.opts.axisLabelFontSizePixels+this.padding;if(this.position=="left"||this.position=="right"){this.width=this.opts.axisLabelFontSizePixels+this.padding;this.height=0}else{this.width=0;this.height=this.opts.axisLabelFontSizePixels+this.padding}};b.prototype.draw=function(p){if(!this.opts.axisLabelColour){this.opts.axisLabelColour="black"}var n=this.plot.getCanvas().getContext("2d");n.save();n.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily;n.fillStyle=this.opts.axisLabelColour;var o=n.measureText(this.opts.axisLabel).width;var m=this.opts.axisLabelFontSizePixels;var l,r,q=0;if(this.position=="top"){l=p.left+p.width/2-o/2;r=p.top+m*0.72}else{if(this.position=="bottom"){l=p.left+p.width/2-o/2;r=p.top+p.height-m*0.72}else{if(this.position=="left"){l=p.left+m*0.72;r=p.height/2+p.top+o/2;q=-Math.PI/2}else{if(this.position=="right"){l=p.left+p.width-m*0.72;r=p.height/2+p.top-o/2;q=Math.PI/2}}}}n.translate(l,r);n.rotate(q);n.fillText(this.opts.axisLabel,0,0);n.restore()};h.prototype=new c();h.prototype.constructor=h;function h(p,l,o,n,m){c.prototype.constructor.call(this,p,l,o,n,m);this.elem=null}h.prototype.calculateSize=function(){var l=d('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(l);this.labelWidth=l.outerWidth(true);this.labelHeight=l.outerHeight(true);l.remove();this.width=this.height=0;if(this.position=="left"||this.position=="right"){this.width=this.labelWidth+this.padding}else{this.height=this.labelHeight+this.padding}};h.prototype.cleanup=function(){if(this.elem){this.elem.remove()}};h.prototype.draw=function(l){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove();this.elem=d('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem);if(this.position=="top"){this.elem.css("left",l.left+l.width/2-this.labelWidth/2+"px");this.elem.css("top",l.top+"px")}else{if(this.position=="bottom"){this.elem.css("left",l.left+l.width/2-this.labelWidth/2+"px");this.elem.css("top",l.top+l.height-this.labelHeight+"px")}else{if(this.position=="left"){this.elem.css("top",l.top+l.height/2-this.labelHeight/2+"px");this.elem.css("left",l.left+"px")}else{if(this.position=="right"){this.elem.css("top",l.top+l.height/2-this.labelHeight/2+"px");this.elem.css("left",l.left+l.width-this.labelWidth+"px")}}}}};g.prototype=new h();g.prototype.constructor=g;function g(p,l,o,n,m){h.prototype.constructor.call(this,p,l,o,n,m)}g.prototype.calculateSize=function(){h.prototype.calculateSize.call(this);this.width=this.height=0;if(this.position=="left"||this.position=="right"){this.width=this.labelHeight+this.padding}else{this.height=this.labelHeight+this.padding}};g.prototype.transforms=function(n,r,q){var o={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(r!=0||q!=0){var l=" translate("+r+"px, "+q+"px)";o["-moz-transform"]+=l;o["-webkit-transform"]+=l;o["-o-transform"]+=l;o["-ms-transform"]+=l}if(n!=0){var t=n/90;var p=" rotate("+n+"deg)";o["-moz-transform"]+=p;o["-webkit-transform"]+=p;o["-o-transform"]+=p;o["-ms-transform"]+=p}var u="top: 0; left: 0; ";for(var m in o){if(o[m]){u+=m+":"+o[m]+";"}}u+=";";return u};g.prototype.calculateOffsets=function(m){var l={x:0,y:0,degrees:0};if(this.position=="bottom"){l.x=m.left+m.width/2-this.labelWidth/2;l.y=m.top+m.height-this.labelHeight}else{if(this.position=="top"){l.x=m.left+m.width/2-this.labelWidth/2;l.y=m.top}else{if(this.position=="left"){l.degrees=-90;l.x=m.left-this.labelWidth/2+this.labelHeight/2;l.y=m.height/2+m.top}else{if(this.position=="right"){l.degrees=90;l.x=m.left+m.width-this.labelWidth/2-this.labelHeight/2;l.y=m.height/2+m.top}}}}l.x=Math.round(l.x);l.y=Math.round(l.y);return l};g.prototype.draw=function(m){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var l=this.calculateOffsets(m);this.elem=d('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(l.degrees,l.x,l.y)+'">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem)};a.prototype=new g();a.prototype.constructor=a;function a(p,l,o,n,m){g.prototype.constructor.call(this,p,l,o,n,m);this.requiresResize=false}a.prototype.transforms=function(o,l,p){var n="";if(o!=0){var m=o/90;while(m<0){m+=4}n+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+m+"); ";this.requiresResize=(this.position=="right")}if(l!=0){n+="left: "+l+"px; "}if(p!=0){n+="top: "+p+"px; "}return n};a.prototype.calculateOffsets=function(m){var l=g.prototype.calculateOffsets.call(this,m);if(this.position=="top"){l.y=m.top+1}else{if(this.position=="left"){l.x=m.left;l.y=m.height/2+m.top-this.labelWidth/2}else{if(this.position=="right"){l.x=m.left+m.width-this.labelHeight;l.y=m.height/2+m.top-this.labelWidth/2}}}return l};a.prototype.draw=function(l){g.prototype.draw.call(this,l);if(this.requiresResize){this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label");this.elem.css("width",this.labelWidth);this.elem.css("height",this.labelHeight)}};function j(l){l.hooks.processOptions.push(function(q,m){if(!m.axisLabels.show){return}var o=false;var n={};var r={left:0,right:0,top:0,bottom:0};var p=2;q.hooks.draw.push(function(t,s){var u=false;if(!o){d.each(t.getAxes(),function(B,x){var y=x.options||t.getOptions()[B];if(B in n){x.labelHeight=x.labelHeight-n[B].height;x.labelWidth=x.labelWidth-n[B].width;y.labelHeight=x.labelHeight;y.labelWidth=x.labelWidth;n[B].cleanup();delete n[B]}if(!y||!y.axisLabel||!x.show){return}u=true;var z=null;if(!y.axisLabelUseHtml&&navigator.appName=="Microsoft Internet Explorer"){var v=navigator.userAgent;var w=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(w.exec(v)!=null){rv=parseFloat(RegExp.$1)}if(rv>=9&&!y.axisLabelUseCanvas&&!y.axisLabelUseHtml){z=g}else{if(!y.axisLabelUseCanvas&&!y.axisLabelUseHtml){z=a}else{if(y.axisLabelUseCanvas){z=b}else{z=h}}}}else{if(y.axisLabelUseHtml||(!i()&&!f())&&!y.axisLabelUseCanvas){z=h}else{if(y.axisLabelUseCanvas||!i()){z=b}else{z=g}}}var A=y.axisLabelPadding===undefined?p:y.axisLabelPadding;n[B]=new z(B,x.position,A,t,y);n[B].calculateSize();y.labelHeight=x.labelHeight+n[B].height;y.labelWidth=x.labelWidth+n[B].width});if(u){o=true;t.setupGrid();t.draw()}}else{o=false;d.each(t.getAxes(),function(x,v){var w=v.options||t.getOptions()[x];if(!w||!w.axisLabel||!v.show){return}n[x].draw(v.box)})}})})}d.plot.plugins.push({init:j,options:k,name:"axisLabels",version:"2.0"})})(jQuery);